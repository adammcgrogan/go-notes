{{define "content"}}
<div class="post-full">
    {{if .IsEditing}}
    {{/* EDITING MODE */}}
    <form action="/note/{{.Post.Slug}}" method="POST" class="note-form">
        <div class="form-group">
            <label for="title">Title</label>
            <input type="text" id="title" name="title" value="{{.Post.Title}}" required>
        </div>
        <div class="form-group">
            <label for="labels">Labels (comma-separated)</label>
            <input type="text" id="labels" name="labels" value="{{join .Post.Labels " , "}}">
        </div>
        <div class="form-group">
            <label for="content">Content (Markdown supported)</label>
            <textarea id="content" name="content" rows="15" required>{{.Post.Content}}</textarea>
        </div>
        <div class="form-actions">
            <button type="submit" class="button-primary">Save Changes</button>
            <a href="/note/{{.Post.Slug}}" class="button-secondary">Cancel</a>
        </div>
    </form>
    {{else}}
    {{/* VIEWING MODE */}}
    <div class="post-full-header">
        <div class="post-full-title-group">
            <h1>{{.Post.Title}}</h1>
            <div class="post-labels">
                {{range .Post.Labels}}
                <span class="label"><span class="label-icon">#</span> {{.}}</span>
                {{end}}
            </div>
        </div>
        <div class="post-full-actions">
            <a href="/" class="action-link">‚Üê Back</a>
            <a href="/note/{{.Post.Slug}}?edit=true" class="action-link edit-link">Edit</a>
            <form action="/note/delete/{{.Post.Slug}}" method="POST"
                onsubmit="return confirm('Are you sure you want to delete this note?');">
                <button type="submit" class="action-link delete-button">Delete</button>
            </form>
        </div>
    </div>

    <p class="post-meta"><small>Published on {{.Post.Date.Format "January 2, 2006"}}</small></p>
    <hr>
    <div class="post-content">
        {{.Post.Content | markdownify}}
    </div>
    {{end}}
</div>
{{end}}